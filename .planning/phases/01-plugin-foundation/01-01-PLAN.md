---
phase: 01-plugin-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .gitignore
  - .claude-plugin/plugin.json
  - .mcp.json
  - sites.json.example
  - commands/connect/.gitkeep
  - commands/diagnose/.gitkeep
  - commands/audit/.gitkeep
  - commands/status/.gitkeep
autonomous: true

must_haves:
  truths:
    - ".gitignore exists and prevents sites.json, .sites/, memory/, and logs from being committed"
    - "Plugin manifest exists at .claude-plugin/plugin.json with correct name, author, and description"
    - "sites.json.example shows both SSH config alias and direct key path patterns"
    - "Command directories exist for all four wpe commands"
  artifacts:
    - path: ".gitignore"
      provides: "Credential and local state protection"
      contains: "sites.json"
    - path: ".claude-plugin/plugin.json"
      provides: "CoWork plugin manifest"
      contains: "wordpress-expert"
    - path: ".mcp.json"
      provides: "MCP configuration placeholder"
    - path: "sites.json.example"
      provides: "Connection template with both SSH patterns"
      contains: "ssh_host"
  key_links:
    - from: ".gitignore"
      to: "sites.json"
      via: "ignore rule"
      pattern: "^sites\\.json$"
    - from: ".gitignore"
      to: ".sites/"
      via: "ignore rule"
      pattern: "^\\.sites/"
---

<objective>
Create the secure plugin skeleton: .gitignore (FIRST), plugin manifest, MCP config, connection template, and command directory stubs.

Purpose: Establishes the CoWork plugin structure that all subsequent plans build on, with credential safety as the first thing created.
Output: Complete plugin directory structure minus skills and CLAUDE.md (those are in Plans 02 and 03).
</objective>

<execution_context>
@/Users/robertli/.claude/get-shit-done/workflows/execute-plan.md
@/Users/robertli/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-plugin-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create .gitignore and plugin configuration files</name>
  <files>.gitignore, .claude-plugin/plugin.json, .mcp.json</files>
  <action>
Create .gitignore as the FIRST file. It must contain these rules in this order:

```
# Credentials and connection config
sites.json

# Synced WordPress files (can contain credentials, API keys)
.sites/

# Diagnostic history and findings (may contain sensitive data)
memory/

# Logs
*.log
logs/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Platform artifacts
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db
desktop.ini

# Editor / IDE
.vscode/
.idea/
*.swp
*.swo
*.swn
*~
.project
.classpath
.settings/

# Node (if adding any tooling)
node_modules/
package-lock.json
yarn.lock

# Temporary files
*.tmp
*.temp
.cache/
```

Then create `.claude-plugin/plugin.json`:
```json
{
  "name": "wordpress-expert",
  "version": "1.0.0",
  "description": "Expert WordPress diagnostics: security audits, performance analysis, code quality review, and plugin conflict resolution for site reliability.",
  "author": {
    "name": "Robert Li"
  }
}
```

Then create `.mcp.json` as an empty object `{}` (v1 doesn't need MCP server connections, per research).
  </action>
  <verify>
Verify .gitignore contains "sites.json" as first substantive rule. Verify plugin.json is valid JSON with name "wordpress-expert" and author "Robert Li". Verify .mcp.json is valid JSON.
  </verify>
  <done>.gitignore blocks credential exposure, plugin.json identifies the plugin correctly, .mcp.json exists as placeholder.</done>
</task>

<task type="auto">
  <name>Task 2: Create sites.json.example and command directory stubs</name>
  <files>sites.json.example, commands/connect/.gitkeep, commands/diagnose/.gitkeep, commands/audit/.gitkeep, commands/status/.gitkeep</files>
  <action>
Create `sites.json.example` showing both SSH config alias AND direct key path patterns (per user decision). Use the exact format from research:

```json
{
  "sites": [
    {
      "name": "example-production",
      "ssh_host": "prod-alias",
      "ssh_user": "wpuser",
      "ssh_key": "~/.ssh/prod-key",
      "wp_path": "/var/www/html",
      "wp_url": "https://example.com",
      "description": "Production site - uses SSH config alias"
    },
    {
      "name": "example-staging",
      "ssh_host": "staging.example.com",
      "ssh_user": "deployer",
      "ssh_key": null,
      "wp_path": "/home/deployer/public_html",
      "wp_url": "https://staging.example.com",
      "description": "Staging site - direct hostname, default SSH key"
    }
  ]
}
```

The first entry demonstrates SSH config alias pattern (ssh_host is an alias, ssh_key points to specific key). The second demonstrates direct hostname with null ssh_key (uses SSH agent/config default).

Create empty command directories with .gitkeep files to preserve the directory structure in git:
- `commands/connect/.gitkeep`
- `commands/diagnose/.gitkeep`
- `commands/audit/.gitkeep`
- `commands/status/.gitkeep`

These will be populated with command markdown files in Phase 4.
  </action>
  <verify>
Verify sites.json.example is valid JSON with two entries showing both patterns. Verify all four command directories exist. Run `git status` to confirm sites.json.example appears but sites.json does NOT (if it existed).
  </verify>
  <done>sites.json.example provides clear template for both SSH patterns. All four command directories (connect, diagnose, audit, status) exist and are tracked by git.</done>
</task>

</tasks>

<verification>
1. `git status` shows .gitignore, .claude-plugin/plugin.json, .mcp.json, sites.json.example, and command .gitkeep files as new
2. Creating a test `sites.json` file should NOT appear in `git status` (proves .gitignore works)
3. `cat .claude-plugin/plugin.json | python3 -m json.tool` succeeds (valid JSON)
4. `cat sites.json.example | python3 -m json.tool` succeeds (valid JSON)
</verification>

<success_criteria>
- .gitignore is the first file created and blocks sites.json, .sites/, memory/, *.log
- Plugin manifest correctly identifies wordpress-expert by Robert Li
- sites.json.example shows both SSH config alias and direct key path patterns
- All four command directories exist with .gitkeep placeholders
- No credential files are trackable by git
</success_criteria>

<output>
After completion, create `.planning/phases/01-plugin-foundation/01-01-SUMMARY.md`
</output>
